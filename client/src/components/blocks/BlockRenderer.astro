---
import type { ComponentType, BlockData } from "../../utils/types";
import Hero from "./Hero.astro";
import HeadingSection from "./SectionHeading.astro";
import CardGrid from "./CardsGrid.astro";
import ContentWithImage from "./ContentWithImage.astro";
import Faqs from "./Faqs.astro";
import PersonCard from "./PersonCard.astro";
import Markdown from "./Markdown.astro";
import FeaturedArticles from "./FeaturedArticles.astro";
import Newsletter from "./Newsletter.astro";


const componentMap: Record<ComponentType, any> = {
  "blocks.hero": Hero,
  "blocks.heading-section": HeadingSection, 
  "blocks.card-grid": CardGrid,
  "blocks.content-with-image": ContentWithImage,
  "blocks.faqs": Faqs,
  "blocks.person-card": PersonCard,
  "blocks.markdown": Markdown,
  "blocks.featured-articles": FeaturedArticles,
  "blocks.newsletter": Newsletter,
};

const { blocks } = Astro.props;

---
<div class="block-renderer">
  {
    blocks.map((block: BlockData) => { 
      // console.log(block, "block.data");
      const Component = componentMap[block.__component];
      return Component ? <Component data={block} /> : null;
    })
  }
</div>
